{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/peibo/Desktop/proyectos/threadhub/frontend/src/components/threads/ThreadList.tsx"],"sourcesContent":["import Link from 'next/link';\n\nimport { ThreadResponse } from '@/lib/types';\n\ninterface ThreadListProps {\n  threads: ThreadResponse[];\n}\n\nexport function ThreadList({ threads }: ThreadListProps) {\n  if (threads.length === 0) {\n    return <p>No hay hilos todav√≠a.</p>;\n  }\n\n  return (\n    <ul className=\"flex flex-col gap-4\">\n      {threads.map((thread) => (\n        <li\n          key={thread.id}\n          className=\"rounded-2xl border border-slate-800 bg-[#0B0B10] px-6 py-5 shadow-md shadow-black/40 transition hover:border-slate-700 hover:bg-[#11111A]\"\n        >\n          <Link href={`/threads/${thread.id}`} className=\"block\">\n            <h3 className=\"mb-2 text-lg font-semibold text-slate-50\">\n              {thread.title}\n            </h3>\n          </Link>\n\n          <p className=\"mb-4 line-clamp-2 text-sm text-slate-300\">\n            {thread.content.slice(0, 220)}‚Ä¶\n          </p>\n\n          <div className=\"flex items-center justify-between text-xs text-slate-500\">\n            <span>por {thread.author.username}</span>\n\n            {/* Ejemplo de meta info similar a ‚Äú3 ¬∑ about 2 hours ago‚Äù */}\n            <span className=\"flex items-center gap-4\">\n              <span className=\"flex items-center gap-1\">\n                {/* icono comentarios (svg opcional) */}\n                <span className=\"text-slate-400\">üí¨</span>\n                <span>3</span>\n              </span>\n              <span>hace 2 horas</span>\n            </span>\n          </div>\n        </li>\n      ))}\n    </ul>\n  );\n}"],"names":[],"mappings":";;;;;AAAA;;;AAQO,SAAS,WAAW,EAAE,OAAO,EAAmB;IACrD,IAAI,QAAQ,MAAM,KAAK,GAAG;QACxB,qBAAO,+RAAC;sBAAE;;;;;;IACZ;IAEA,qBACE,+RAAC;QAAG,WAAU;kBACX,QAAQ,GAAG,CAAC,CAAC,uBACZ,+RAAC;gBAEC,WAAU;;kCAEV,+RAAC,wNAAI;wBAAC,MAAM,CAAC,SAAS,EAAE,OAAO,EAAE,EAAE;wBAAE,WAAU;kCAC7C,cAAA,+RAAC;4BAAG,WAAU;sCACX,OAAO,KAAK;;;;;;;;;;;kCAIjB,+RAAC;wBAAE,WAAU;;4BACV,OAAO,OAAO,CAAC,KAAK,CAAC,GAAG;4BAAK;;;;;;;kCAGhC,+RAAC;wBAAI,WAAU;;0CACb,+RAAC;;oCAAK;oCAAK,OAAO,MAAM,CAAC,QAAQ;;;;;;;0CAGjC,+RAAC;gCAAK,WAAU;;kDACd,+RAAC;wCAAK,WAAU;;0DAEd,+RAAC;gDAAK,WAAU;0DAAiB;;;;;;0DACjC,+RAAC;0DAAK;;;;;;;;;;;;kDAER,+RAAC;kDAAK;;;;;;;;;;;;;;;;;;;eAvBL,OAAO,EAAE;;;;;;;;;;AA8BxB"}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/peibo/Desktop/proyectos/threadhub/frontend/src/components/threads/SearchInput.tsx"],"sourcesContent":["interface SearchInputProps {\n  value: string;\n  onChange: (value: string) => void;\n}\n\nexport function SearchInput({ value, onChange }: SearchInputProps) {\n  return (\n    <input\n      type=\"text\"\n      placeholder=\"Search threads...\"\n      value={value}\n      onChange={(e) => onChange(e.target.value)}\n      className=\"w-full rounded-full border border-slate-700 bg-[#050509] px-4 py-2 text-sm text-slate-100 outline-none transition placeholder:text-slate-500 focus:border-violet-500 focus:ring-2 focus:ring-violet-500/40\"\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;;AAKO,SAAS,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAoB;IAC/D,qBACE,+RAAC;QACC,MAAK;QACL,aAAY;QACZ,OAAO;QACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;QACxC,WAAU;;;;;;AAGhB"}},
    {"offset": {"line": 170, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/peibo/Desktop/proyectos/threadhub/frontend/src/lib/http.ts"],"sourcesContent":["const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3000';\r\n\r\nexport async function http<T>(\r\n    endpoint: string,\r\n    options: RequestInit = {}\r\n): Promise<T> {\r\n    //Token guardado en localStorage\r\n    let token = null;\r\n    if (typeof window !== 'undefined') {\r\n        token = localStorage.getItem('token');\r\n    }\r\n\r\n    //Merge de headers\r\n    const headers = new Headers({\r\n        'Content-Type': 'application/json',\r\n        ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n    });\r\n\r\n    if (options.headers) {\r\n        new Headers(options.headers).forEach((value, key) => {\r\n            headers.set(key, value);\r\n        });\r\n    }\r\n\r\n    const response = await fetch(`${API_URL}${endpoint}`, {\r\n        ...options,\r\n        headers,\r\n    });\r\n\r\n    //Controlamos los errores en las peticiones\r\n    if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        throw new Error(errorData.message || 'Error en la peticion HTTP');\r\n    }\r\n\r\n    return response.json() as Promise<T>;\r\n}"],"names":[],"mappings":";;;;AAAA,MAAM,UAAU,6DAAmC;AAE5C,eAAe,KAClB,QAAgB,EAChB,UAAuB,CAAC,CAAC;IAEzB,gCAAgC;IAChC,IAAI,QAAQ;IACZ;;IAIA,kBAAkB;IAClB,MAAM,UAAU,IAAI,QAAQ;QACxB,gBAAgB;QAChB,GAAI,QAAQ;YAAE,eAAe,CAAC,OAAO,EAAE,OAAO;QAAC,IAAI,CAAC,CAAC;IACzD;IAEA,IAAI,QAAQ,OAAO,EAAE;QACjB,IAAI,QAAQ,QAAQ,OAAO,EAAE,OAAO,CAAC,CAAC,OAAO;YACzC,QAAQ,GAAG,CAAC,KAAK;QACrB;IACJ;IAEA,MAAM,WAAW,MAAM,MAAM,GAAG,UAAU,UAAU,EAAE;QAClD,GAAG,OAAO;QACV;IACJ;IAEA,2CAA2C;IAC3C,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACvD,MAAM,IAAI,MAAM,UAAU,OAAO,IAAI;IACzC;IAEA,OAAO,SAAS,IAAI;AACxB"}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/peibo/Desktop/proyectos/threadhub/frontend/src/services/threads.service.ts"],"sourcesContent":["import { http } from '../lib/http';\r\nimport { ThreadResponse, CreateThreadDTO, UpdateThreadDTO, ThreadFilters, ReplyResponse } from '../lib/types';\r\n\r\nexport const threadsService = {\r\n\r\n    async getRepliesByThread(threadId: string): Promise<ReplyResponse[]> {\r\n        return http<ReplyResponse[]>(`/api/replies/thread/${threadId}`);\r\n    },\r\n\r\n    async getAllThreads(filters?: ThreadFilters): Promise<ThreadResponse[]> {\r\n        const query = filters\r\n            ? '?' +\r\n            Object.entries(filters)\r\n                .map(([key, value]) => `${key}=${encodeURIComponent(value as string | number)}`)\r\n                .join('&')\r\n            : '';\r\n        return http<ThreadResponse[]>(`/api/threads${query}`);\r\n\r\n    },\r\n\r\n    async getThreadById(id: string): Promise<ThreadResponse> {\r\n        return http<ThreadResponse>(`/api/threads/${id}`);\r\n    },\r\n\r\n    async createThread(data: CreateThreadDTO): Promise<ThreadResponse> {\r\n        return http<ThreadResponse>('/api/threads', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(data),\r\n        });;\r\n    },\r\n\r\n    async updateThread(id: string, data: UpdateThreadDTO): Promise<ThreadResponse[]> {\r\n        return http<ThreadResponse[]>(`/api/threads/${id}`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(data),\r\n        });\r\n    },\r\n\r\n\r\n    async deleteThread(id: string): Promise<void> {\r\n        return http<void>(`/api/threads/${id}`, {\r\n            method: 'DELETE',\r\n\r\n        });\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAGO,MAAM,iBAAiB;IAE1B,MAAM,oBAAmB,QAAgB;QACrC,OAAO,IAAA,2KAAI,EAAkB,CAAC,oBAAoB,EAAE,UAAU;IAClE;IAEA,MAAM,eAAc,OAAuB;QACvC,MAAM,QAAQ,UACR,MACF,OAAO,OAAO,CAAC,SACV,GAAG,CAAC,CAAC,CAAC,KAAK,MAAM,GAAK,GAAG,IAAI,CAAC,EAAE,mBAAmB,QAA2B,EAC9E,IAAI,CAAC,OACR;QACN,OAAO,IAAA,2KAAI,EAAmB,CAAC,YAAY,EAAE,OAAO;IAExD;IAEA,MAAM,eAAc,EAAU;QAC1B,OAAO,IAAA,2KAAI,EAAiB,CAAC,aAAa,EAAE,IAAI;IACpD;IAEA,MAAM,cAAa,IAAqB;QACpC,OAAO,IAAA,2KAAI,EAAiB,gBAAgB;YACxC,QAAQ;YACR,SAAS;gBACL,gBAAgB;YACpB;YACA,MAAM,KAAK,SAAS,CAAC;QACzB;;;IACJ;IAEA,MAAM,cAAa,EAAU,EAAE,IAAqB;QAChD,OAAO,IAAA,2KAAI,EAAmB,CAAC,aAAa,EAAE,IAAI,EAAE;YAChD,QAAQ;YACR,SAAS;gBACL,gBAAgB;YACpB;YACA,MAAM,KAAK,SAAS,CAAC;QACzB;IACJ;IAGA,MAAM,cAAa,EAAU;QACzB,OAAO,IAAA,2KAAI,EAAO,CAAC,aAAa,EAAE,IAAI,EAAE;YACpC,QAAQ;QAEZ;IACJ;AAKJ"}},
    {"offset": {"line": 254, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/peibo/Desktop/proyectos/threadhub/frontend/src/hooks/useThreads.ts"],"sourcesContent":["// hooks/useThreads.ts\r\nimport { useState, useEffect } from 'react';\r\nimport { threadsService } from '@/services/threads.service';\r\nimport type { ThreadResponse, ThreadFilters, ReplyResponse } from '@/lib/types';\r\n\r\ninterface UseThreadsProps {\r\n    filters?: ThreadFilters;\r\n    threadId?: string; // Para cargar hilo + replies espec√≠ficos\r\n}\r\n\r\nexport function useThreads({ filters, threadId }: UseThreadsProps) {\r\n    const [threads, setThreads] = useState<ThreadResponse[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [thread, setThread] = useState<ThreadResponse | null>(null); // Hilo espec√≠fico\r\n    const [replies, setReplies] = useState<ReplyResponse[]>([]);        // Respuestas del hilo\r\n\r\n    const fetchThreads = async () => {\r\n        if (!threadId) { // Lista de hilos\r\n            setLoading(true);\r\n            setError(null);\r\n        }\r\n        try {\r\n            const data = await threadsService.getAllThreads(filters);\r\n            setThreads(data);\r\n        } catch (err: any) {\r\n            setError(err.message || 'Error fetching threads');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n    const fetchThreadWithReplies = async () => {\r\n        if (threadId) { // Hilo espec√≠fico + replies\r\n            setLoading(true);\r\n            setError(null);\r\n            try {\r\n                const [threadData, repliesData] = await Promise.all([\r\n                    threadsService.getThreadById(threadId),\r\n                    threadsService.getRepliesByThread(threadId)\r\n                ]);\r\n                setThread(threadData);\r\n                setReplies(repliesData);\r\n            } catch (err: any) {\r\n                setError(err.message || 'Error fetching thread');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (threadId) {\r\n            fetchThreadWithReplies();\r\n        } else {\r\n            fetchThreads();\r\n        }\r\n    }, [filters?.search, threadId]); // Recarga por search o cambio de threadId\r\n\r\n    return {\r\n        threads,\r\n        thread,\r\n        replies,\r\n        loading,\r\n        error,\r\n        refresh: threadId ? fetchThreadWithReplies : fetchThreads\r\n    };\r\n}\r\n"],"names":[],"mappings":"AAAA,sBAAsB;;;;;AACtB;AACA;;;AAQO,SAAS,WAAW,EAAE,OAAO,EAAE,QAAQ,EAAmB;IAC7D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kQAAQ,EAAmB,EAAE;IAC3D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kQAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,kQAAQ,EAAgB;IAClD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,kQAAQ,EAAwB,OAAO,kBAAkB;IACrF,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kQAAQ,EAAkB,EAAE,GAAU,sBAAsB;IAE1F,MAAM,eAAe;QACjB,IAAI,CAAC,UAAU;YACX,WAAW;YACX,SAAS;QACb;QACA,IAAI;YACA,MAAM,OAAO,MAAM,wMAAc,CAAC,aAAa,CAAC;YAChD,WAAW;QACf,EAAE,OAAO,KAAU;YACf,SAAS,IAAI,OAAO,IAAI;QAC5B,SAAU;YACN,WAAW;QACf;IACJ;IACA,MAAM,yBAAyB;QAC3B,IAAI,UAAU;YACV,WAAW;YACX,SAAS;YACT,IAAI;gBACA,MAAM,CAAC,YAAY,YAAY,GAAG,MAAM,QAAQ,GAAG,CAAC;oBAChD,wMAAc,CAAC,aAAa,CAAC;oBAC7B,wMAAc,CAAC,kBAAkB,CAAC;iBACrC;gBACD,UAAU;gBACV,WAAW;YACf,EAAE,OAAO,KAAU;gBACf,SAAS,IAAI,OAAO,IAAI;YAC5B,SAAU;gBACN,WAAW;YACf;QACJ;IACJ;IAEA,IAAA,mQAAS,EAAC;QACN,IAAI,UAAU;YACV;QACJ,OAAO;YACH;QACJ;IACJ,GAAG;QAAC,SAAS;QAAQ;KAAS,GAAG,0CAA0C;IAE3E,OAAO;QACH;QACA;QACA;QACA;QACA;QACA,SAAS,WAAW,yBAAyB;IACjD;AACJ"}},
    {"offset": {"line": 324, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/peibo/Desktop/proyectos/threadhub/frontend/src/components/threads/CreateThreadButton.tsx"],"sourcesContent":["interface CreateThreadButtonProps {\r\n    onClick?: () => void;\r\n}\r\n\r\nexport function CreateThreadButton({ onClick }: CreateThreadButtonProps) {\r\n    return (\r\n        <button\r\n            type=\"button\"\r\n            onClick={onClick}\r\n            className=\"rounded-full bg-violet-600 px-4 py-2 text-sm font-medium text-white shadow-md shadow-violet-600/40 transition hover:bg-violet-500\"\r\n        >\r\n            + New thread\r\n        </button>\r\n    );\r\n}"],"names":[],"mappings":";;;;;;AAIO,SAAS,mBAAmB,EAAE,OAAO,EAA2B;IACnE,qBACI,+RAAC;QACG,MAAK;QACL,SAAS;QACT,WAAU;kBACb;;;;;;AAIT"}},
    {"offset": {"line": 346, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/peibo/Desktop/proyectos/threadhub/frontend/src/app/threads/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport { useSearchParams } from 'next/navigation';\nimport { ThreadList } from '@/components/threads/ThreadList';\nimport { SearchInput } from '@/components/threads/SearchInput';\nimport { CreateThreadDialog } from '@/components/threads/CreateThreadDialog';\nimport { useThreads } from '@/hooks/useThreads';\nimport type { ThreadResponse, UserResponse } from '@/lib/types';\nimport { CreateThreadButton } from '@/components/threads/CreateThreadButton';\n\nexport default function Home() {\n  const searchParams = useSearchParams();\n  const queryFromUrl = searchParams.get('query') || '';\n\n  //Estado para mostrar o no formulario para crear thread\n  const [showForm, setShowForm] = useState(false);\n\n  // Estado para b√∫squeda controlada\n  const [searchTerm, setSearchTerm] = useState(queryFromUrl);\n\n  // Hook para traer threads filtrados\n  const { threads, loading, error, refresh } = useThreads({ filters: { search: searchTerm } });\n\n  // Usuario demo; reemplazar con getCurrentUser si quieres\n  const currentUser: UserResponse = {\n    id: '1',\n    username: 'DemoUser',\n    email: 'demo@example.com',\n    avatarUrl: null,\n    createdAt: new Date(),\n    updatedAt: new Date(),\n  };\n\n  // referencia al contenedor donde se renderiza el formulario\n  const formRef = useRef<HTMLDivElement | null>(null);\n\n  // Opcional: actualizar searchTerm si cambia la query en URL desde fuera\n  useEffect(() => {\n    setSearchTerm(queryFromUrl);\n  }, [queryFromUrl]);\n\n  // cuando showForm pasa a true y el formulario est√° en el DOM, hacemos scroll suave\n  useEffect(() => {\n    if (showForm && formRef.current) {\n      formRef.current.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start',\n      });\n    }\n  }, [showForm]);\n\n  return (\n    <main className=\"min-h-screen bg-[#050509] text-slate-100\">\n      <div className=\"mx-auto flex max-w-6xl flex-col px-6 pb-10 pt-8\">\n        {/* Top bar */}\n        <header className=\"mb-8 flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n          <div className=\"flex w-full flex-col gap-3 sm:flex-row sm:items-center sm:justify-end md:w-auto\">\n            <div className=\"w-full sm:w-80\">\n              <SearchInput value={searchTerm} onChange={setSearchTerm} />\n            </div>\n            <CreateThreadButton\n              onClick={() => setShowForm(true)}\n            />\n          </div>\n        </header>\n\n        {loading && <p className=\"text-sm text-slate-400\">Cargando hilos...</p>}\n        {error && (\n          <p className=\"text-sm text-red-400\">Error: {error}</p>\n        )}\n\n        {!loading && !error && <ThreadList threads={threads} />}\n\n        <div ref={formRef}>\n          {showForm && (\n            <CreateThreadButton\n              onClick={() => setShowForm(true)}\n            />\n          )}\n        </div>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAEA;AAEA;AATA;;;;;;;;AAWe,SAAS;IACtB,MAAM,eAAe,IAAA,sMAAe;IACpC,MAAM,eAAe,aAAa,GAAG,CAAC,YAAY;IAElD,uDAAuD;IACvD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,kQAAQ,EAAC;IAEzC,kCAAkC;IAClC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,kQAAQ,EAAC;IAE7C,oCAAoC;IACpC,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,IAAA,yLAAU,EAAC;QAAE,SAAS;YAAE,QAAQ;QAAW;IAAE;IAE1F,yDAAyD;IACzD,MAAM,cAA4B;QAChC,IAAI;QACJ,UAAU;QACV,OAAO;QACP,WAAW;QACX,WAAW,IAAI;QACf,WAAW,IAAI;IACjB;IAEA,4DAA4D;IAC5D,MAAM,UAAU,IAAA,gQAAM,EAAwB;IAE9C,wEAAwE;IACxE,IAAA,mQAAS,EAAC;QACR,cAAc;IAChB,GAAG;QAAC;KAAa;IAEjB,mFAAmF;IACnF,IAAA,mQAAS,EAAC;QACR,IAAI,YAAY,QAAQ,OAAO,EAAE;YAC/B,QAAQ,OAAO,CAAC,cAAc,CAAC;gBAC7B,UAAU;gBACV,OAAO;YACT;QACF;IACF,GAAG;QAAC;KAAS;IAEb,qBACE,+RAAC;QAAK,WAAU;kBACd,cAAA,+RAAC;YAAI,WAAU;;8BAEb,+RAAC;oBAAO,WAAU;8BAChB,cAAA,+RAAC;wBAAI,WAAU;;0CACb,+RAAC;gCAAI,WAAU;0CACb,cAAA,+RAAC,4MAAW;oCAAC,OAAO;oCAAY,UAAU;;;;;;;;;;;0CAE5C,+RAAC,0NAAkB;gCACjB,SAAS,IAAM,YAAY;;;;;;;;;;;;;;;;;gBAKhC,yBAAW,+RAAC;oBAAE,WAAU;8BAAyB;;;;;;gBACjD,uBACC,+RAAC;oBAAE,WAAU;;wBAAuB;wBAAQ;;;;;;;gBAG7C,CAAC,WAAW,CAAC,uBAAS,+RAAC,0MAAU;oBAAC,SAAS;;;;;;8BAE5C,+RAAC;oBAAI,KAAK;8BACP,0BACC,+RAAC,0NAAkB;wBACjB,SAAS,IAAM,YAAY;;;;;;;;;;;;;;;;;;;;;;AAOzC"}}]
}