{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/peibo/Desktop/proyectos/threadhub/frontend/src/lib/actions.ts"],"sourcesContent":["'use server';\n\nimport { z } from 'zod';\nimport { createThread, addReply, getCurrentUser } from './data';\nimport { revalidatePath } from 'next/cache';\n\nconst createThreadSchema = z.object({\n  title: z.string().min(5, 'Title must be at least 5 characters long.'),\n  content: z.string().min(10, 'Content must be at least 10 characters long.'),\n});\n\nexport async function createThreadAction(prevState: any, formData: FormData) {\n  const currentUser = await getCurrentUser();\n  if (!currentUser) {\n    return { message: 'You must be logged in to create a thread.', status: 'error' };\n  }\n\n  const validatedFields = createThreadSchema.safeParse({\n    title: formData.get('title'),\n    content: formData.get('content'),\n  });\n\n  if (!validatedFields.success) {\n    return {\n      errors: validatedFields.error.flatten().fieldErrors,\n      message: 'Validation failed. Please check your input.',\n      status: 'error',\n    };\n  }\n\n  try {\n    const newThread = await createThread(validatedFields.data.title, validatedFields.data.content, currentUser);\n    revalidatePath('/');\n    return { message: 'Thread created successfully!', status: 'success', threadId: newThread.id };\n  } catch (error) {\n    return { message: 'Failed to create thread.', status: 'error' };\n  }\n}\n\nconst addReplySchema = z.object({\n    content: z.string().min(1, 'Reply cannot be empty.'),\n    threadId: z.string(),\n});\n\nexport async function addReplyAction(prevState: any, formData: FormData) {\n    const currentUser = await getCurrentUser();\n    if (!currentUser) {\n        return { message: 'You must be logged in to reply.', status: 'error' };\n    }\n\n    const validatedFields = addReplySchema.safeParse({\n        content: formData.get('content'),\n        threadId: formData.get('threadId'),\n    });\n\n    if (!validatedFields.success) {\n        return {\n            errors: validatedFields.error.flatten().fieldErrors,\n            message: 'Validation failed.',\n            status: 'error',\n        };\n    }\n    \n    try {\n        await addReply(validatedFields.data.threadId, validatedFields.data.content, currentUser);\n        revalidatePath(`/threads/${validatedFields.data.threadId}`);\n        return { message: 'Reply added!', status: 'success' };\n    } catch (error) {\n        return { message: 'Failed to add reply.', status: 'error' };\n    }\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;;;;;;AAEA,MAAM,qBAAqB,0LAAC,CAAC,MAAM,CAAC;IAClC,OAAO,0LAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACzB,SAAS,0LAAC,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI;AAC9B;AAEO,eAAe,mBAAmB,SAAc,EAAE,QAAkB;IACzE,MAAM,cAAc,MAAM,IAAA,qLAAc;IACxC,IAAI,CAAC,aAAa;QAChB,OAAO;YAAE,SAAS;YAA6C,QAAQ;QAAQ;IACjF;IAEA,MAAM,kBAAkB,mBAAmB,SAAS,CAAC;QACnD,OAAO,SAAS,GAAG,CAAC;QACpB,SAAS,SAAS,GAAG,CAAC;IACxB;IAEA,IAAI,CAAC,gBAAgB,OAAO,EAAE;QAC5B,OAAO;YACL,QAAQ,gBAAgB,KAAK,CAAC,OAAO,GAAG,WAAW;YACnD,SAAS;YACT,QAAQ;QACV;IACF;IAEA,IAAI;QACF,MAAM,YAAY,MAAM,IAAA,mLAAY,EAAC,gBAAgB,IAAI,CAAC,KAAK,EAAE,gBAAgB,IAAI,CAAC,OAAO,EAAE;QAC/F,IAAA,gMAAc,EAAC;QACf,OAAO;YAAE,SAAS;YAAgC,QAAQ;YAAW,UAAU,UAAU,EAAE;QAAC;IAC9F,EAAE,OAAO,OAAO;QACd,OAAO;YAAE,SAAS;YAA4B,QAAQ;QAAQ;IAChE;AACF;AAEA,MAAM,iBAAiB,0LAAC,CAAC,MAAM,CAAC;IAC5B,SAAS,0LAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC3B,UAAU,0LAAC,CAAC,MAAM;AACtB;AAEO,eAAe,eAAe,SAAc,EAAE,QAAkB;IACnE,MAAM,cAAc,MAAM,IAAA,qLAAc;IACxC,IAAI,CAAC,aAAa;QACd,OAAO;YAAE,SAAS;YAAmC,QAAQ;QAAQ;IACzE;IAEA,MAAM,kBAAkB,eAAe,SAAS,CAAC;QAC7C,SAAS,SAAS,GAAG,CAAC;QACtB,UAAU,SAAS,GAAG,CAAC;IAC3B;IAEA,IAAI,CAAC,gBAAgB,OAAO,EAAE;QAC1B,OAAO;YACH,QAAQ,gBAAgB,KAAK,CAAC,OAAO,GAAG,WAAW;YACnD,SAAS;YACT,QAAQ;QACZ;IACJ;IAEA,IAAI;QACA,MAAM,IAAA,+KAAQ,EAAC,gBAAgB,IAAI,CAAC,QAAQ,EAAE,gBAAgB,IAAI,CAAC,OAAO,EAAE;QAC5E,IAAA,gMAAc,EAAC,CAAC,SAAS,EAAE,gBAAgB,IAAI,CAAC,QAAQ,EAAE;QAC1D,OAAO;YAAE,SAAS;YAAgB,QAAQ;QAAU;IACxD,EAAE,OAAO,OAAO;QACZ,OAAO;YAAE,SAAS;YAAwB,QAAQ;QAAQ;IAC9D;AACJ;;;IA3DsB;IAiCA;;AAjCA,gSAAA;AAiCA,gSAAA"}},
    {"offset": {"line": 105, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/peibo/Desktop/proyectos/threadhub/frontend/.next-internal/server/app/threads/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {createThreadAction as '601d2a4f6467522241f59d0cc3decfddf6b20e2d7e'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}