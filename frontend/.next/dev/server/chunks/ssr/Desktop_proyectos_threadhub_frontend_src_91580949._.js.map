{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/peibo/Desktop/proyectos/threadhub/frontend/src/components/threads/ThreadList.tsx"],"sourcesContent":["import Link from 'next/link';\n\nimport { ThreadResponse } from '@/lib/types';\n\ninterface ThreadListProps {\n  threads: ThreadResponse[];\n}\n\nexport function ThreadList({ threads }: ThreadListProps) {\n  if (threads.length === 0) {\n    return <p>No hay hilos todavía.</p>;\n  }\n\n  return (\n    <ul className=\"space-y-4\">\n      {threads.map(thread => (\n        <li\n          key={thread.id}\n          className=\"border rounded p-4 hover:bg-muted transition\"\n        >\n          <Link href={`/threads/${thread.id}`}>\n            <h3 className=\"text-lg font-semibold\">{thread.title}</h3>\n          </Link>\n\n          <p className=\"text-sm text-muted-foreground\">\n            {thread.content.slice(0, 150)}…\n          </p>\n\n          <div className=\"text-xs mt-2 text-muted-foreground\">\n            por {thread.author.username}\n          </div>\n        </li>\n      ))}\n    </ul>\n  );\n}"],"names":[],"mappings":";;;;;AAAA;;;AAQO,SAAS,WAAW,EAAE,OAAO,EAAmB;IACrD,IAAI,QAAQ,MAAM,KAAK,GAAG;QACxB,qBAAO,+RAAC;sBAAE;;;;;;IACZ;IAEA,qBACE,+RAAC;QAAG,WAAU;kBACX,QAAQ,GAAG,CAAC,CAAA,uBACX,+RAAC;gBAEC,WAAU;;kCAEV,+RAAC,wNAAI;wBAAC,MAAM,CAAC,SAAS,EAAE,OAAO,EAAE,EAAE;kCACjC,cAAA,+RAAC;4BAAG,WAAU;sCAAyB,OAAO,KAAK;;;;;;;;;;;kCAGrD,+RAAC;wBAAE,WAAU;;4BACV,OAAO,OAAO,CAAC,KAAK,CAAC,GAAG;4BAAK;;;;;;;kCAGhC,+RAAC;wBAAI,WAAU;;4BAAqC;4BAC7C,OAAO,MAAM,CAAC,QAAQ;;;;;;;;eAZxB,OAAO,EAAE;;;;;;;;;;AAkBxB"}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/peibo/Desktop/proyectos/threadhub/frontend/src/components/threads/SearchInput.tsx"],"sourcesContent":["interface SearchInputProps {\n  value: string;\n  onChange: (value: string) => void;\n}\n\nexport function SearchInput({ value, onChange }: SearchInputProps) {\n  return (\n    <input\n      type=\"text\"\n      placeholder=\"Search threads...\"\n      value={value}\n      onChange={(e) => onChange(e.target.value)}\n      className=\"w-full border rounded px-3 py-2\"\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;;AAKO,SAAS,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAoB;IAC/D,qBACE,+RAAC;QACC,MAAK;QACL,aAAY;QACZ,OAAO;QACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;QACxC,WAAU;;;;;;AAGhB"}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/peibo/Desktop/proyectos/threadhub/frontend/src/lib/http.ts"],"sourcesContent":["const API_URL = process.env.NEXT_PUBLIC_API_URL; // URL base del backend\r\n\r\nexport async function http<T>(\r\n    endpoint: string,\r\n    options: RequestInit = {}\r\n): Promise<T> {\r\n    //Token guardado en localStorage\r\n    const token = localStorage.getItem('token');\r\n\r\n    //Merge de headers\r\n    const headers = new Headers({\r\n        'Content-Type': 'application/json',\r\n        ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n    });\r\n\r\n    if (options.headers) {\r\n        new Headers(options.headers).forEach((value, key) => {\r\n            headers.set(key, value);\r\n        });\r\n    }\r\n\r\n    const response = await fetch(`${API_URL}${endpoint}`, {\r\n        ...options,\r\n        headers,\r\n    });\r\n\r\n    //Controlamos los errores en las peticiones\r\n    if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        throw new Error(errorData.message || 'Error en la peticion HTTP');\r\n    }\r\n\r\n    return response.json() as Promise<T>;\r\n}"],"names":[],"mappings":";;;;AAAA,MAAM,UAAU,QAAQ,GAAG,CAAC,mBAAmB,EAAE,uBAAuB;AAEjE,eAAe,KAClB,QAAgB,EAChB,UAAuB,CAAC,CAAC;IAEzB,gCAAgC;IAChC,MAAM,QAAQ,aAAa,OAAO,CAAC;IAEnC,kBAAkB;IAClB,MAAM,UAAU,IAAI,QAAQ;QACxB,gBAAgB;QAChB,GAAI,QAAQ;YAAE,eAAe,CAAC,OAAO,EAAE,OAAO;QAAC,IAAI,CAAC,CAAC;IACzD;IAEA,IAAI,QAAQ,OAAO,EAAE;QACjB,IAAI,QAAQ,QAAQ,OAAO,EAAE,OAAO,CAAC,CAAC,OAAO;YACzC,QAAQ,GAAG,CAAC,KAAK;QACrB;IACJ;IAEA,MAAM,WAAW,MAAM,MAAM,GAAG,UAAU,UAAU,EAAE;QAClD,GAAG,OAAO;QACV;IACJ;IAEA,2CAA2C;IAC3C,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QACvD,MAAM,IAAI,MAAM,UAAU,OAAO,IAAI;IACzC;IAEA,OAAO,SAAS,IAAI;AACxB"}},
    {"offset": {"line": 138, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/peibo/Desktop/proyectos/threadhub/frontend/src/services/threads.service.ts"],"sourcesContent":["import { http } from '../lib/http';\r\nimport { ThreadResponse, CreateThreadDTO, UpdateThreadDTO, ThreadFilters } from '../lib/types';\r\n\r\nexport const threadsService = {\r\n\r\n    async getAllThreads(filters?: ThreadFilters): Promise<ThreadResponse[]> {\r\n        const query = filters\r\n            ? '?' +\r\n            Object.entries(filters)\r\n                .map(([key, value]) => `${key}=${encodeURIComponent(value as string | number)}`)\r\n                .join('&')\r\n            : '';\r\n        return http<ThreadResponse[]>(`/api/threads${query}`);\r\n\r\n    },\r\n\r\n    async getThreadById(id: string): Promise<ThreadResponse[]> {\r\n        return http<ThreadResponse[]>(`/api/threads/${id}`);\r\n    },\r\n\r\n    async createThread(data: CreateThreadDTO): Promise<ThreadResponse[]> {\r\n        return http<ThreadResponse[]>('/api/threads', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(data),\r\n        });;\r\n    },\r\n\r\n    async updateThread(id: string, data: UpdateThreadDTO): Promise<ThreadResponse[]> {\r\n        return http<ThreadResponse[]>(`/api/threads/${id}`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify(data),\r\n        });\r\n    },\r\n\r\n\r\n    async deleteThread(id: string): Promise<void> {\r\n        return http<void>(`/api/threads/${id}`, {\r\n            method: 'DELETE',\r\n\r\n        });\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;;AAGO,MAAM,iBAAiB;IAE1B,MAAM,eAAc,OAAuB;QACvC,MAAM,QAAQ,UACR,MACF,OAAO,OAAO,CAAC,SACV,GAAG,CAAC,CAAC,CAAC,KAAK,MAAM,GAAK,GAAG,IAAI,CAAC,EAAE,mBAAmB,QAA2B,EAC9E,IAAI,CAAC,OACR;QACN,OAAO,IAAA,2KAAI,EAAmB,CAAC,YAAY,EAAE,OAAO;IAExD;IAEA,MAAM,eAAc,EAAU;QAC1B,OAAO,IAAA,2KAAI,EAAmB,CAAC,aAAa,EAAE,IAAI;IACtD;IAEA,MAAM,cAAa,IAAqB;QACpC,OAAO,IAAA,2KAAI,EAAmB,gBAAgB;YAC1C,QAAQ;YACR,SAAS;gBACL,gBAAgB;YACpB;YACA,MAAM,KAAK,SAAS,CAAC;QACzB;;;IACJ;IAEA,MAAM,cAAa,EAAU,EAAE,IAAqB;QAChD,OAAO,IAAA,2KAAI,EAAmB,CAAC,aAAa,EAAE,IAAI,EAAE;YAChD,QAAQ;YACR,SAAS;gBACL,gBAAgB;YACpB;YACA,MAAM,KAAK,SAAS,CAAC;QACzB;IACJ;IAGA,MAAM,cAAa,EAAU;QACzB,OAAO,IAAA,2KAAI,EAAO,CAAC,aAAa,EAAE,IAAI,EAAE;YACpC,QAAQ;QAEZ;IACJ;AAKJ"}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/peibo/Desktop/proyectos/threadhub/frontend/src/components/threads/CreateThreadDialog.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { CreateThreadDTO, ThreadResponse, UserResponse } from '@/lib/types';\nimport { threadsService } from '@/services/threads.service';\n\ninterface Props {\n  currentUser: UserResponse;\n  onCreated?: (thread: ThreadResponse) => void;\n}\n\nexport function CreateThreadDialog({ currentUser, onCreated }: Props) {\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n\n    try {\n      const newThread = await threadsService.createThread({\n        title,\n        content,\n        authorId: currentUser.id,\n      });\n\n      setTitle('');\n      setContent('');\n\n      if (onCreated) onCreated(newThread[0]);\n    } catch (err: any) {\n      setError(err.message || 'Failed to create thread');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-2 w-full max-w-sm\">\n      <input\n        placeholder=\"Title\"\n        value={title}\n        onChange={(e) => setTitle(e.target.value)}\n        className=\"w-full border rounded px-3 py-2\"\n        required\n      />\n      <textarea\n        placeholder=\"Content\"\n        value={content}\n        onChange={(e) => setContent(e.target.value)}\n        className=\"w-full border rounded px-3 py-2\"\n        required\n      />\n      {error && <p className=\"text-red-500 text-sm\">{error}</p>}\n      <button\n        type=\"submit\"\n        disabled={loading}\n        className=\"px-4 py-2 bg-primary text-white rounded\"\n      >\n        {loading ? 'Creating...' : 'Create Thread'}\n      </button>\n    </form>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAOO,SAAS,mBAAmB,EAAE,WAAW,EAAE,SAAS,EAAS;IAClE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,kQAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kQAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kQAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,kQAAQ,EAAgB;IAElD,eAAe,aAAa,CAAkB;QAC5C,EAAE,cAAc;QAChB,WAAW;QACX,SAAS;QAET,IAAI;YACF,MAAM,YAAY,MAAM,wMAAc,CAAC,YAAY,CAAC;gBAClD;gBACA;gBACA,UAAU,YAAY,EAAE;YAC1B;YAEA,SAAS;YACT,WAAW;YAEX,IAAI,WAAW,UAAU,SAAS,CAAC,EAAE;QACvC,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,OAAO,IAAI;QAC1B,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,+RAAC;QAAK,UAAU;QAAc,WAAU;;0BACtC,+RAAC;gBACC,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gBACxC,WAAU;gBACV,QAAQ;;;;;;0BAEV,+RAAC;gBACC,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;gBAC1C,WAAU;gBACV,QAAQ;;;;;;YAET,uBAAS,+RAAC;gBAAE,WAAU;0BAAwB;;;;;;0BAC/C,+RAAC;gBACC,MAAK;gBACL,UAAU;gBACV,WAAU;0BAET,UAAU,gBAAgB;;;;;;;;;;;;AAInC"}},
    {"offset": {"line": 271, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/peibo/Desktop/proyectos/threadhub/frontend/src/hooks/useThreads.ts"],"sourcesContent":["// hooks/useThreads.ts\r\nimport { useState, useEffect } from 'react';\r\nimport { threadsService } from '@/services/threads.service';\r\nimport type { ThreadResponse, ThreadFilters } from '@/lib/types';\r\n\r\nexport function useThreads(filters?: ThreadFilters) {\r\n    const [threads, setThreads] = useState<ThreadResponse[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const fetchThreads = async () => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const data = await threadsService.getAllThreads(filters);\r\n            setThreads(data);\r\n        } catch (err: any) {\r\n            setError(err.message || 'Error fetching threads');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchThreads();\r\n    }, [filters?.search]); // vuelve a cargar cuando cambie el search\r\n\r\n    return { threads, loading, error, refresh: fetchThreads };\r\n}\r\n"],"names":[],"mappings":"AAAA,sBAAsB;;;;;AACtB;AACA;;;AAGO,SAAS,WAAW,OAAuB;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kQAAQ,EAAmB,EAAE;IAC3D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kQAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,kQAAQ,EAAgB;IAElD,MAAM,eAAe;QACjB,WAAW;QACX,SAAS;QACT,IAAI;YACA,MAAM,OAAO,MAAM,wMAAc,CAAC,aAAa,CAAC;YAChD,WAAW;QACf,EAAE,OAAO,KAAU;YACf,SAAS,IAAI,OAAO,IAAI;QAC5B,SAAU;YACN,WAAW;QACf;IACJ;IAEA,IAAA,mQAAS,EAAC;QACN;IACJ,GAAG;QAAC,SAAS;KAAO,GAAG,0CAA0C;IAEjE,OAAO;QAAE;QAAS;QAAS;QAAO,SAAS;IAAa;AAC5D"}},
    {"offset": {"line": 312, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/peibo/Desktop/proyectos/threadhub/frontend/src/app/threads/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { ThreadList } from '@/components/threads/ThreadList';\nimport { SearchInput } from '@/components/threads/SearchInput';\nimport { CreateThreadDialog } from '@/components/threads/CreateThreadDialog';\nimport { useThreads } from '@/hooks/useThreads';\nimport type { ThreadResponse, UserResponse } from '@/lib/types';\n\ninterface HomeProps {\n  searchParams?: {\n    query?: string;\n  };\n}\n\nexport default function Home({ searchParams }: HomeProps) {\n  const query = searchParams?.query || '';\n  const [searchTerm, setSearchTerm] = useState(query);\n  const { threads, loading, error, refresh } = useThreads({ search: searchTerm });\n\n  // Usuario demo; reemplazar con getCurrentUser si quieres\n  const currentUser: UserResponse = {\n    id: '1',\n    username: 'DemoUser',\n    email: 'demo@example.com',\n    avatarUrl: null,\n    createdAt: new Date(),\n    updatedAt: new Date(),\n  };\n\n  return (\n    <div className=\"container mx-auto max-w-5xl px-4 py-8\">\n      <div className=\"mb-8 flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n        <h1 className=\"font-headline text-3xl font-bold tracking-tight text-foreground md:text-4xl\">\n          Discussions\n        </h1>\n        <div className=\"flex w-full flex-col items-stretch gap-2 sm:flex-row sm:items-center sm:justify-end md:w-auto\">\n          <SearchInput value={searchTerm} onChange={setSearchTerm} />\n          <CreateThreadDialog\n            currentUser={currentUser}\n            onCreated={() => refresh()} // refresca la lista al crear un hilo\n          />\n        </div>\n      </div>\n\n      {loading && <p>Cargando hilos...</p>}\n      {error && <p className=\"text-red-500\">Error: {error}</p>}\n\n      {!loading && !error && <ThreadList threads={threads} />}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAee,SAAS,KAAK,EAAE,YAAY,EAAa;IACtD,MAAM,QAAQ,cAAc,SAAS;IACrC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,kQAAQ,EAAC;IAC7C,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,IAAA,yLAAU,EAAC;QAAE,QAAQ;IAAW;IAE7E,yDAAyD;IACzD,MAAM,cAA4B;QAChC,IAAI;QACJ,UAAU;QACV,OAAO;QACP,WAAW;QACX,WAAW,IAAI;QACf,WAAW,IAAI;IACjB;IAEA,qBACE,+RAAC;QAAI,WAAU;;0BACb,+RAAC;gBAAI,WAAU;;kCACb,+RAAC;wBAAG,WAAU;kCAA8E;;;;;;kCAG5F,+RAAC;wBAAI,WAAU;;0CACb,+RAAC,4MAAW;gCAAC,OAAO;gCAAY,UAAU;;;;;;0CAC1C,+RAAC,0NAAkB;gCACjB,aAAa;gCACb,WAAW,IAAM;;;;;;;;;;;;;;;;;;YAKtB,yBAAW,+RAAC;0BAAE;;;;;;YACd,uBAAS,+RAAC;gBAAE,WAAU;;oBAAe;oBAAQ;;;;;;;YAE7C,CAAC,WAAW,CAAC,uBAAS,+RAAC,0MAAU;gBAAC,SAAS;;;;;;;;;;;;AAGlD"}}]
}